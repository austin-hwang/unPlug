<!doctype html>
<html lang="en">
<head>
  <title>Alarm Clock App</title>
  <meta charset="utf-8">
  <meta name="description" content="Alarm Clock App">
  <meta name="author" content="Will Kashdan">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script>document.write('<link rel="stylesheet" href="./styles/styles.css?dev=' + Math.floor(Math.random() * 100) + '"\>');</script>
  <link rel="icon shortcut" href="https://www.squarespace.com/favicon.ico">
  <link rel="stylesheet" href="./styles/alertify.core.css" />
  <link rel="stylesheet" href="./styles/alertify.default.css"/>
  <script src="./scripts/alertify.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://unpkg.com/sweetalert2@7.0.7/dist/sweetalert2.all.js"></script>
  <script type="text/javascript" src="./scripts/browserfs.min.js"></script>
  <script type="text/javascript">
	// Installs globals onto window:
	// * Buffer
	// * require (monkey-patches if already defined)
	// * process
	// You can pass in an arbitrary object if you do not wish to pollute
	// the global namespace.
	BrowserFS.install(window);
	// Configures BrowserFS to use the LocalStorage file system.
	BrowserFS.configure({
	  fs: "LocalStorage"
	}, function(e) {
	  if (e) {
		// An error happened!
		throw e;
	  }
	  // Otherwise, BrowserFS is ready-to-use!
	});
  </script>
  
  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
  <![endif]-->
</head>
<body>
	<header class="app-header">
		<h1 class="app-title">ALARM CLOCK</h1>
	</header>
	<main class="container">
		<div id="alertBox" class="alert-box"></div>
		<div id="sound"></div>
		<div id="timeBox" class="time-box"></div>
		<div class="alarm-form">
			<form id="alarmForm">
				<input id="alarmHour" form="alarmForm" class="alarm-input"/>
				<input id="alarmMinute" class="alarm-input"/>
				<div id="periodBtns">
					<button id="amBtn" type="button" value="am" class="alarm-btn period-btn active-period-btn">AM</button>
					<button id="pmBtn" type="button" value="pm" class="alarm-btn period-btn">PM</button>
				</div>
				<button id="setAlarmBtn" form="alarmForm" class="alarm-btn set-btn">SET ALARM</button>
			</form>
			<button onclick="openTransactions()" id="transactions" class="alarm-btn set-btn">TRANSACTIONS</button>
			<script>
				function openTransactions(){
					var content = ""
					fs.readFile('/test.txt', function(err, contents) {
					   content = contents.toString();
					});
					swal({
						html: "<p>" + content + "</p>",
						background: '#fff url(//bit.ly/1Nqn9HU)'
					})
				}
			</script>
		</div>
		<div class="alarm-list">
			<h2 class="app-title">Alarms</h2>
			<div class="buttons">
				<div id="alarmBox">
					<div class="alarm-item">No Alarms Set</div>
				</div>
			</div>
		</div>
		<script>
					
		alertify.set({
			labels : {
				ok     : "Snooze",
				cancel : "Turn Off"
			},
				delay : 5000,
			buttonReverse : false,
			buttonFocus   : "ok"
		});
			
		</script>
		<style>
			.upload-btn-wrapper {
				position: relative;
				overflow: hidden;
				display: inline-block;
			  }

			  .upload-btn-wrapper input[type=file] {
				font-size: 100px;
				position: absolute;
				left: 0;
				top: 0;
				opacity: 0;
			  }
		</style>
		<div class="upload-btn-wrapper">
			<button class="alarm-btn set-btn">Upload a file</button>
			<input type="file" capture="camera" accept="image/*" id="cameraInput" name="cameraInput" />
		</div>
		<canvas id="canvas"></canvas>
		<script>
			var cameraInput = document.getElementById('cameraInput');
			cameraInput.addEventListener('change', handleImage, false);
			var canvas = document.getElementById('canvas');
			var ctx = canvas.getContext('2d');
			function handleImage(e){
				var reader = new FileReader();
				reader.onload = function(event){
					var img = new Image();
					img.onload = function(){
						ctx.drawImage(img,0,0, img.width, img.height, 0, 0, canvas.width, canvas.height);
					}
					img.src = event.target.result;
				}
				reader.readAsDataURL(e.target.files[0]);     
			}
		</script>
	</main>
	<audio src="bell.mp3" loop="true" id="bell" enablejavascript="true">
	<script>document.write('<script src="./scripts/models/Clock.js?dev=' + Math.floor(Math.random() * 1000) + '"\><\/script>');</script>
	<script>document.write('<script src="./scripts/models/Alarm.js?dev=' + Math.floor(Math.random() * 1000) + '"\><\/script>');</script>
	<script>document.write('<script src="./scripts/models/AlarmClockApp.js?dev=' + Math.floor(Math.random() * 1000) + '"\><\/script>');</script>
	<script>document.write('<script src="./scripts/models/AlarmClockView.js?dev=' + Math.floor(Math.random() * 1000) + '"\><\/script>');</script>
	<script>document.write('<script src="./scripts/models/AlarmClockController.js?dev=' + Math.floor(Math.random() * 1000) + '"\><\/script>');</script>
	<script>document.write('<script src="./scripts/app.js?dev=' + Math.floor(Math.random() * 1000) + '"\><\/script>');</script>
</body>
</html>